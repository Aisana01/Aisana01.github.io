<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>MDN Games: Three.js demo</title>
	<style>
		body {
			margin: 0;
			height: 100vh;
		}

		canvas {
			display: block;
		}

		h1 {
			position: absolute;
			top: 2em;
			left: 2em;
			font-family: 'Montserrat';
			font-size: 7em;
			text-transform: uppercase;
			width: auto;
			line-height: .8em;
			border: 5px solid black;
			padding: .2em;
		}
	</style>
</head>

<body>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/102/three.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.5/dat.gui.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.2/TweenMax.min.js"></script>
	<script src="javascript/EventDispatcher.js"></script>
	<script>
		var scene = new THREE.Scene();

		var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000)
		camera.position.z = 5;

		var renderer = new THREE.WebGLRenderer({ antialias: true });
		renderer.setClearColor("#e5e5e5");
		renderer.setSize(window.innerWidth, window.innerHeight);

		document.body.appendChild(renderer.domElement);

		window.addEventListener('resize', () => {
			renderer.setSize(window.innerWidth, window.innerHeight);
			camera.aspect = window.innerWidth / window.innerHeight;

			camera.updateProjectionMatrix();
		})

		var raycaster = new THREE.Raycaster();
		var mouse = new THREE.Vector2();
		const width = 2;

		const height = 2;

		const depth = 2;
		var geometry = new THREE.BoxGeometry(width, height, depth);
		var material = new THREE.MeshLambertMaterial({ color: 0xF7F7F7 });
		//var mesh = new THREE.Mesh(geometry, material);

		//scene.add(mesh);

		meshX = -10;
		// for(var i = 0; i<15;i++) {
		var mesh = new THREE.Mesh(geometry, material);
		var x = 0.08;
		var y = 0.09;
		var z = 0.07;
		mesh.position.x = (x - 0.5) * 10;
		mesh.position.y = (y - 0.5) * 10;
		mesh.position.z = (z - 0.5) * 10;
		scene.add(mesh);
		// meshX+=1;
		// }

		//цвет
		var light = new THREE.PointLight(0xFFFFFF, 1, 1000)
		light.position.set(0, 0, 0);
		scene.add(light);

		var light = new THREE.PointLight(0xFFFFFF, 2, 1000)
		light.position.set(0, 0, 25);
		scene.add(light);//цвет

		var render = function () {
			EventsControls.update();
			controls.update();
			renderer.render(scene, camera);
			requestAnimationFrame(render);


			renderer.render(scene, camera);
		}

		function onMouseMove(event) {
			event.preventDefault();

			mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
			mouse.y = - (event.clientY / window.innerHeight) * 2 + 1;

			raycaster.setFromCamera(mouse, camera);

			var intersects = raycaster.intersectObjects(scene.children, true);
			for (var i = 0; i < intersects.length; i++) {
				this.tl = new TimelineMax();
				this.tl.to(intersects[i].object.scale, 1, { x: 2, ease: Expo.easeOut })
				this.tl.to(intersects[i].object.scale, .5, { x: .5, ease: Expo.easeOut })
				this.tl.to(intersects[i].object.position, .5, { x: 2, ease: Expo.easeOut })
				this.tl.to(intersects[i].object.rotation, .5, { y: Math.PI * .5, ease: Expo.easeOut }, "=-1.5")
			}
		}


		///
		EventsControls = new EventsControls(camera, renderer.domElement);

		var mesh = new THREE.Mesh(geometry, material);
		scene.add(mesh);

		EventsControls.attach(mesh);

		// function render() {
		// 	EventsControls.update();
		// 	controls.update();
		// 	renderer.render(scene, camera);
		// }
		///
		window.addEventListener('mousemove', onMouseMove);
		render();
	</script>
</body>

</html>